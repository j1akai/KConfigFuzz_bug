last executing test programs:

1.574316844s ago: executing program 3 (id=4):
socket(0x10, 0x3, 0x10)

1.320102294s ago: executing program 1 (id=2):
ioctl(0xffffffffffffffff, 0x0, &(0x7f0000000000))

1.056312358s ago: executing program 5 (id=6):
timer_gettime(0x0, &(0x7f0000000000))

954.178402ms ago: executing program 4 (id=5):
setsockopt(0xffffffffffffffff, 0x0, 0x0, &(0x7f0000000000), 0x0)

813.172975ms ago: executing program 2 (id=3):
getsockopt(0xffffffffffffffff, 0x0, 0x0, &(0x7f0000000000), &(0x7f0000000000))

722.957078ms ago: executing program 3 (id=7):
sendmsg(0xffffffffffffffff, &(0x7f0000000000), 0x0)

619.464721ms ago: executing program 1 (id=8):
inotify_add_watch(0xffffffffffffffff, &(0x7f0000000000), 0x0)

416.830539ms ago: executing program 5 (id=9):
openat(0xffffffffffffff9c, &(0x7f0000000040)='/dev/adsp1', 0x0, 0x0)
openat(0xffffffffffffff9c, &(0x7f0000000080)='/dev/adsp1', 0x1, 0x0)
openat(0xffffffffffffff9c, &(0x7f00000000c0)='/dev/adsp1', 0x2, 0x0)
openat(0xffffffffffffff9c, &(0x7f0000000100)='/dev/adsp1', 0x800, 0x0)

325.221352ms ago: executing program 4 (id=10):
socket$vsock_stream(0x28, 0x1, 0x0)

262.04256ms ago: executing program 3 (id=11):
openat(0xffffffffffffff9c, &(0x7f0000000040)='/sys/kernel/debug/damon/kdamond_pid', 0x0, 0x0)
openat(0xffffffffffffff9c, &(0x7f0000000080)='/sys/kernel/debug/damon/kdamond_pid', 0x1, 0x0)
openat(0xffffffffffffff9c, &(0x7f00000000c0)='/sys/kernel/debug/damon/kdamond_pid', 0x2, 0x0)
openat(0xffffffffffffff9c, &(0x7f0000000100)='/sys/kernel/debug/damon/kdamond_pid', 0x800, 0x0)

147.060032ms ago: executing program 0 (id=1):
write(0xffffffffffffffff, &(0x7f0000000000), 0x0)

666.41µs ago: executing program 2 (id=12):
pkey_alloc(0x0, 0x0)

179.151µs ago: executing program 1 (id=13):
io_uring_register$IORING_REGISTER_BUFFERS(0xffffffffffffffff, 0x0, &(0x7f0000000000), 0x0)

0s ago: executing program 4 (id=14):
shmat(0x0, 0x0, 0x0)

kernel console output (not intermixed with test programs):

Warning: Permanently added '[localhost]:36305' (ED25519) to the list of known hosts.
buildroot login: [  146.651935][ T2951] cgroup: Unknown subsys name 'net'
[  146.990223][ T2951] cgroup: Unknown subsys name 'rlimit'
Setting up swapspace version 1, size = 127995904 bytes
[  174.000395][ T2951] Adding 124996k swap on ./swap-file.  Priority:0 extents:1 across:124996k 
[  189.982974][    C1] hrtimer: interrupt took 1648800 ns
[  189.985250][    C1] 
[  189.985527][    C1] =============================
[  189.985618][    C1] [ BUG: Invalid wait context ]
[  189.985843][    C1] 6.6.0 #1 Not tainted
[  189.986301][    C1] -----------------------------
[  189.986407][    C1] syz.0.1/3100 is trying to lock:
[  189.986652][    C1] ffffffff903aa398 (&port_lock_key){-.-.}-{3:3}, at: serial8250_console_write+0x526/0xe4c
[  189.989602][    C1] other info that might help us debug this:
[  189.989811][    C1] context-{2:2}
[  189.990022][    C1] 5 locks held by syz.0.1/3100:
[  189.990225][    C1]  #0: ff600000902b7010 (&mm->mmap_lock){++++}-{4:4}, at: lock_mm_and_find_vma+0x38/0x568
[  189.991240][    C1]  #1: ff600000913f8508 (sb_pagefaults){.+.+}-{0:0}, at: ext4_page_mkwrite+0x1ce/0x10ec
[  189.992235][    C1]  #2: ffffffff878d5600 (console_lock){+.+.}-{0:0}, at: vprintk_emit+0x174/0x672
[  189.993084][    C1]  #3: ffffffff878d5710 (console_srcu){....}-{0:0}, at: console_flush_all+0xea/0xe04
[  189.993902][    C1]  #4: ffffffff878d58c0 (console_owner){-...}-{0:0}, at: console_flush_all+0x47a/0xe04
[  189.994726][    C1] stack backtrace:
[  189.995262][    C1] CPU: 1 PID: 3100 Comm: syz.0.1 Not tainted 6.6.0 #1
[  189.995568][    C1] Hardware name: riscv-virtio,qemu (DT)
[  189.996166][    C1] Call Trace:
[  189.996316][    C1] [<ffffffff8000dc50>] dump_backtrace+0x32/0x3c
[  189.996662][    C1] [<ffffffff85aeb8b6>] show_stack+0x34/0x40
[  189.996925][    C1] [<ffffffff85b4131c>] dump_stack_lvl+0xe2/0x14c
[  189.997324][    C1] [<ffffffff85b413a2>] dump_stack+0x1c/0x24
[  189.997684][    C1] [<ffffffff8023e890>] __lock_acquire+0x6de2/0x6f34
[  189.997983][    C1] [<ffffffff8023ed30>] lock_acquire+0x34e/0xd20
[  189.998265][    C1] [<ffffffff85b651a6>] _raw_spin_lock_irqsave+0x3e/0x62
[  189.998604][    C1] [<ffffffff81ac83a6>] serial8250_console_write+0x526/0xe4c
[  189.998936][    C1] [<ffffffff81ab094e>] univ8250_console_write+0x66/0x9c
[  189.999207][    C1] [<ffffffff80258dc8>] console_flush_all+0x4fa/0xe04
[  189.999471][    C1] [<ffffffff802597fe>] console_unlock+0x12c/0x270
[  189.999723][    C1] [<ffffffff8025d694>] vprintk_emit+0x192/0x672
[  189.999984][    C1] [<ffffffff8025db9e>] vprintk_default+0x2a/0x32
[  190.000247][    C1] [<ffffffff8025f24a>] vprintk+0x1d4/0x258
[  190.000514][    C1] [<ffffffff85af0106>] _printk+0x9a/0xc0
[  190.000787][    C1] [<ffffffff8031f384>] hrtimer_interrupt+0x79a/0x79c
[  190.001187][    C1] [<ffffffff84192570>] riscv_timer_interrupt+0x7a/0xcc
[  190.001457][    C1] [<ffffffff8027c4da>] handle_percpu_devid_irq+0x284/0x59e
[  190.001715][    C1] [<ffffffff80265bd4>] generic_handle_domain_irq+0x76/0xaa
[  190.002015][    C1] [<ffffffff816e7b9e>] riscv_intc_irq+0x6e/0xa2
[  190.002295][    C1] [<ffffffff85b424e4>] handle_riscv_irq+0x2e/0x4c
[  190.002738][    C1] [<ffffffff85b42b7a>] do_irq+0x6a/0xb4
SYZFAIL: failed to recv rpc
fd=3 want=4 recv=0 n=0 (errno 9: Bad file descriptor)

VM DIAGNOSIS:
09:55:08  Registers:
info registers vcpu 0
 pc       00000000000d8cd6
 mhartid  0000000000000000
 mstatus  0000000a000040a2
 mip      0000000000000000
 mie      00000000000002aa
 mideleg  0000000000000222
 medeleg  000000000000b109
 mtvec    0000000080000520
 stvec    ffffffff80006e1c
 mepc     ffffffff80017912
 sepc     00000000000d8cda
 mcause   0000000000000009
 scause   0000000000000008
 mtval    0000000000000000
 stval    0000000000000000
 mscratch 000000008001a000
 sscratch ff6000008c88b300
 satp     a00a00000010c268
 x0/zero  0000000000000000 x1/ra    000000000001655e x2/sp    00007fffe2bc6500 x3/gp    00000000002b2b70
 x4/tp    0000000029fa6740 x5/t0    000000000001655e x6/t1    0000000000000038 x7/t2    00007fffe2bc6366
 x8/s0    00000000002e6398 x9/s1    00000000002e63e0 x10/a0   ffffffffffffff9c x11/a1   0000200000000100
 x12/a2   0000000000000800 x13/a3   0000000000000000 x14/a4   0000000000000000 x15/a5   0000000000000000
 x16/a6   00000000000000bd x17/a7   0000000000000038 x18/s2   000000000010ae70 x19/s3   000000000010ae68
 x20/s4   00000000002e6398 x21/s5   00000000002e6398 x22/s6   00000000002e63a4 x23/s7   ffffffffffffffff
 x24/s8   00007fffe2bc66b8 x25/s9   0000000000000000 x26/s10  0000000000000000 x27/s11  0000001b2cd2010a
 x28/t3   ffffffffffffff9c x29/t4   0029209080000000 x30/t5   ffffffffffffffff x31/t6   000000007531e7c6
 f0/ft0   0000000000000000 f1/ft1   0000000000000000 f2/ft2   0000000000000000 f3/ft3   0000000000000000
 f4/ft4   0000000000000000 f5/ft5   0000000000000000 f6/ft6   0000000000000000 f7/ft7   0000000000000000
 f8/fs0   0000000000000000 f9/fs1   0000000000000000 f10/fa0  0000000000000000 f11/fa1  0000000000000000
 f12/fa2  0000000000000000 f13/fa3  0000000000000000 f14/fa4  0000000000000000 f15/fa5  0000000000000000
 f16/fa6  0000000000000000 f17/fa7  0000000000000000 f18/fs2  0000000000000000 f19/fs3  0000000000000000
 f20/fs4  0000000000000000 f21/fs5  0000000000000000 f22/fs6  0000000000000000 f23/fs7  0000000000000000
 f24/fs8  0000000000000000 f25/fs9  0000000000000000 f26/fs10 0000000000000000 f27/fs11 0000000000000000
 f28/ft8  0000000000000000 f29/ft9  0000000000000000 f30/ft10 0000000000000000 f31/ft11 0000000000000000
info registers vcpu 1
 pc       ffffffff80253ffa
 mhartid  0000000000000001
 mstatus  0000000a000001a0
 mip      00000000000000a0
 mie      000000000000022a
 mideleg  0000000000000222
 medeleg  000000000000b109
 mtvec    0000000080000520
 stvec    ffffffff80006e1c
 mepc     ffffffff804043ca
 sepc     ffffffff80324e18
 mcause   8000000000000003
 scause   8000000000000005
 mtval    0000000000000000
 stval    0000000000000000
 mscratch 0000000080018000
 sscratch 0000000000000000
 satp     a00a10000010fcf2
 x0/zero  0000000000000000 x1/ra    ffffffff80253fd6 x2/sp    ff2000000000b5d0 x3/gp    ffffffff890652c0
 x4/tp    ff6000008c9ce600 x5/t0    ffffffff8023e9e2 x6/t1    00000000000f0000 x7/t2    ffffffff87223478
 x8/s0    ff2000000000b6b0 x9/s1    ff2000000000b710 x10/a0   ff2000000000b894 x11/a1   00000000000f0000
 x12/a2   0000000000010000 x13/a3   0000000000000000 x14/a4   0000000000000000 x15/a5   0000000000000007
 x16/a6   0000000000000000 x17/a7   0000000000010000 x18/s2   1fe40000000016bc x19/s3   dfffffff00000000
 x20/s4   000000000000000e x21/s5   ff2000000000b71e x22/s6   ff2000000000b640 x23/s7   ff2000000000b880
 x24/s8   0000000000000001 x25/s9   0000000000000000 x26/s10  ffffffff901f48e0 x27/s11  0000000000000001
 x28/t3   0000000000f00000 x29/t4   ffe3ffff000016e3 x30/t5   ffe3ffff000016e4 x31/t6   ff2000000000b71e
 f0/ft0   0000000000000000 f1/ft1   0000000000000000 f2/ft2   0000000000000000 f3/ft3   0000000000000000
 f4/ft4   0000000000000000 f5/ft5   0000000000000000 f6/ft6   0000000000000000 f7/ft7   0000000000000000
 f8/fs0   0000000000000000 f9/fs1   0000000000000000 f10/fa0  0000000000000000 f11/fa1  0000000000000000
 f12/fa2  0000000000000000 f13/fa3  0000000000000000 f14/fa4  0000000000000000 f15/fa5  0000000000000000
 f16/fa6  0000000000000000 f17/fa7  0000000000000000 f18/fs2  0000000000000000 f19/fs3  0000000000000000
 f20/fs4  0000000000000000 f21/fs5  0000000000000000 f22/fs6  0000000000000000 f23/fs7  0000000000000000
 f24/fs8  0000000000000000 f25/fs9  0000000000000000 f26/fs10 0000000000000000 f27/fs11 0000000000000000
 f28/ft8  0000000000000000 f29/ft9  0000000000000000 f30/ft10 0000000000000000 f31/ft11 0000000000000000
