last executing test programs:

kernel console output (not intermixed with test programs):

buildroot login: [   81.868959][    C0] 
[   81.871119][    C0] =============================
[   81.871837][    C0] [ BUG: Invalid wait context ]
[   81.872673][    C0] 6.6.0 #1 Not tainted
[   81.873593][    C0] -----------------------------
[   81.874343][    C0] scp/2947 is trying to lock:
[   81.875135][    C0] ff600000ffdefb58 (&zone->lock){..-.}-{3:3}, at: get_page_from_freelist+0x44e/0x3116
[   81.879289][    C0] other info that might help us debug this:
[   81.880326][    C0] context-{2:2}
[   81.881025][    C0] 4 locks held by scp/2947:
[   81.881768][    C0]  #0: ff60000091594410 (sb_writers#4){.+.+}-{0:0}, at: vfs_write+0x24a/0x966
[   81.883810][    C0]  #1: ff6000008bb1e7b0 (&sb->s_type->i_mutex_key#8){++++}-{4:4}, at: ext4_buffered_write_iter+0xa6/0x37a
[   81.885856][    C0]  #2: ff600000fdd041d8 (&pcp->lock){+.+.}-{3:3}, at: get_page_from_freelist+0xa96/0x3116
[   81.887770][    C0]  #3: ff600000fdcfee18 (&rq->__lock){-.-.}-{2:2}, at: scheduler_tick+0x10a/0x89c
[   81.889904][    C0] stack backtrace:
[   81.890950][    C0] CPU: 0 PID: 2947 Comm: scp Not tainted 6.6.0 #1
[   81.892111][    C0] Hardware name: riscv-virtio,qemu (DT)
[   81.893235][    C0] Call Trace:
[   81.894000][    C0] [<ffffffff8000dc50>] dump_backtrace+0x32/0x3c
[   81.895233][    C0] [<ffffffff85aeb8b6>] show_stack+0x34/0x40
[   81.896350][    C0] [<ffffffff85b4131c>] dump_stack_lvl+0xe2/0x14c
[   81.897563][    C0] [<ffffffff85b413a2>] dump_stack+0x1c/0x24
[   81.898741][    C0] [<ffffffff8023e890>] __lock_acquire+0x6de2/0x6f34
[   81.899930][    C0] [<ffffffff8023ed30>] lock_acquire+0x34e/0xd20
[   81.901067][    C0] [<ffffffff85b651a6>] _raw_spin_lock_irqsave+0x3e/0x62
[   81.902352][    C0] [<ffffffff8086d8bc>] get_page_from_freelist+0x44e/0x3116
[   81.903632][    C0] [<ffffffff808719ea>] __alloc_pages+0x1d6/0x243a
[   81.904830][    C0] [<ffffffff808e2270>] alloc_pages+0x2ae/0x45c
[   81.905973][    C0] [<ffffffff816da494>] __stack_depot_save+0x434/0x602
[   81.907157][    C0] [<ffffffff809145b2>] kasan_save_stack+0x50/0x62
[   81.908328][    C0] [<ffffffff80916ad0>] __kasan_record_aux_stack+0xe4/0x146
[   81.909592][    C0] [<ffffffff80916ee4>] kasan_record_aux_stack+0xe/0x16
[   81.910847][    C0] [<ffffffff80130ba8>] task_work_add+0x9c/0x276
[   81.912054][    C0] [<ffffffff8018607e>] task_tick_mm_cid+0xd0/0x186
[   81.913264][    C0] [<ffffffff801863ca>] scheduler_tick+0x296/0x89c
[   81.914487][    C0] [<ffffffff80318c14>] update_process_times+0x1be/0x25e
[   81.915788][    C0] [<ffffffff8034eec8>] tick_sched_handle+0x78/0x152
[   81.916982][    C0] [<ffffffff8034fa5c>] tick_sched_timer+0xc0/0x1c6
[   81.918165][    C0] [<ffffffff8031bab8>] __hrtimer_run_queues+0x1f4/0xbbe
[   81.919496][    C0] [<ffffffff8031eeae>] hrtimer_interrupt+0x2c4/0x79c
[   81.920782][    C0] [<ffffffff84192570>] riscv_timer_interrupt+0x7a/0xcc
[   81.922038][    C0] [<ffffffff8027c4da>] handle_percpu_devid_irq+0x284/0x59e
[   81.923257][    C0] [<ffffffff80265bd4>] generic_handle_domain_irq+0x76/0xaa
[   81.924492][    C0] [<ffffffff816e7b9e>] riscv_intc_irq+0x6e/0xa2
[   81.925604][    C0] [<ffffffff85b424e4>] handle_riscv_irq+0x2e/0x4c
[   81.926882][    C0] [<ffffffff85b42ba2>] do_irq+0x92/0xb4
[   81.927993][    C0] [<ffffffff80006ef8>] ret_from_exception+0x0/0x64
[   81.929109][    C0] [<ffffffff85b44d88>] check_preemption_disabled+0xa/0xd8
[   81.930279][    C0] [<ffffffff84906b14>] napi_skb_cache_put+0x28/0x230
[   81.931450][    C0] [<ffffffff849361c8>] __napi_kfree_skb+0x5a/0x70
[   81.932639][    C0] [<ffffffff84a64fd8>] napi_gro_receive+0xa7a/0xd7e
[   81.933748][    C0] [<ffffffff82dbe392>] receive_buf+0x11b2/0x77d0
[   81.934924][    C0] [<ffffffff82dc5202>] virtnet_poll+0x852/0x131e
[   81.936048][    C0] [<ffffffff849935e4>] __napi_poll.constprop.0+0xa4/0x79c
[   81.937247][    C0] [<ffffffff84994506>] net_rx_action+0x82a/0xc92
[   81.938367][    C0] [<ffffffff85b66a5c>] __do_softirq+0x410/0x102e
[   81.939540][    C0] [<ffffffff800c8790>] __irq_exit_rcu+0x16a/0x436
[   81.940723][    C0] [<ffffffff800c8dee>] irq_exit_rcu+0xc/0x114
[   81.941867][    C0] [<ffffffff85b424f6>] handle_riscv_irq+0x40/0x4c
[   81.943083][    C0] [<ffffffff85b42b7a>] do_irq+0x6a/0xb4
Warning: Permanently added '[localhost]:7141' (ED25519) to the list of known hosts.
[  122.739860][ T2951] cgroup: Unknown subsys name 'net'
[  122.959956][ T2951] cgroup: Unknown subsys name 'rlimit'
Setting up swapspace version 1, size = 127995904 bytes

VM DIAGNOSIS:
17:52:53  Registers:
info registers vcpu 0
 pc       ffffffff85b65168
 mhartid  0000000000000000
 mstatus  0000000a000000a0
 mip      0000000000000000
 mie      00000000000002aa
 mideleg  0000000000000222
 medeleg  000000000000b109
 mtvec    0000000080000520
 stvec    ffffffff80006e1c
 mepc     ffffffff800072ec
 sepc     00007fffb85401e4
 mcause   8000000000000003
 scause   0000000000000008
 mtval    0000000000000000
 stval    0000000000000000
 mscratch 000000008001a000
 sscratch 0000000000000000
 satp     a007c0000010c45d
 x0/zero  0000000000000000 x1/ra    ffffffff803a46ca x2/sp    ff200000044c3b80 x3/gp    ffffffff890652c0
 x4/tp    ff6000008c050000 x5/t0    ffffffff8023e9e2 x6/t1    ff200000044c3b20 x7/t2    ffffffff87223478
 x8/s0    ff200000044c3bf0 x9/s1    0000000000000000 x10/a0   0000000000f00000 x11/a1   00000000000f0000
 x12/a2   0000000000000000 x13/a3   0000000000000002 x14/a4   0000000000000008 x15/a5   ffebffff1fba49c2
 x16/a6   0000000000000003 x17/a7   0000000000000000 x18/s2   0000000000000002 x19/s3   ffffffff902439a8
 x20/s4   ffffffff85e68e10 x21/s5   ffffffff902439a8 x22/s6   ffffffff9040234c x23/s7   0000000000000000
 x24/s8   ff6000008bbd3600 x25/s9   ffffffff90402200 x26/s10  ff200000044c3dc0 x27/s11  ffffffff86d55490
 x28/t3   0000000000f00000 x29/t4   000000000000f1f1 x30/t5   fffffffff1f1f1f1 x31/t6   fffffffff3000000
 f0/ft0   0000000000000000 f1/ft1   0000000000000000 f2/ft2   0000000000000000 f3/ft3   0000000000000000
 f4/ft4   0000000000000000 f5/ft5   0000000000000000 f6/ft6   0000000000000000 f7/ft7   0000000000000000
 f8/fs0   0000000000000000 f9/fs1   0000000000000000 f10/fa0  0000000000000000 f11/fa1  0000000000000000
 f12/fa2  0000000000000000 f13/fa3  0000000000000000 f14/fa4  0000000000000000 f15/fa5  0000000000000000
 f16/fa6  0000000000000000 f17/fa7  0000000000000000 f18/fs2  0000000000000000 f19/fs3  0000000000000000
 f20/fs4  0000000000000000 f21/fs5  0000000000000000 f22/fs6  0000000000000000 f23/fs7  0000000000000000
 f24/fs8  0000000000000000 f25/fs9  0000000000000000 f26/fs10 0000000000000000 f27/fs11 0000000000000000
 f28/ft8  0000000000000000 f29/ft9  0000000000000000 f30/ft10 0000000000000000 f31/ft11 0000000000000000
info registers vcpu 1
 pc       ffffffff84f9d638
 mhartid  0000000000000001
 mstatus  0000000a000000a2
 mip      0000000000000000
 mie      00000000000002aa
 mideleg  0000000000000222
 medeleg  000000000000b109
 mtvec    0000000080000520
 stvec    ffffffff80006e1c
 mepc     ffffffff80017912
 sepc     ffffffff84f2d47e
 mcause   0000000000000009
 scause   8000000000000005
 mtval    0000000000000000
 stval    0000000000000000
 mscratch 0000000080018000
 sscratch 0000000000000000
 satp     a007f0000010a0c3
 x0/zero  0000000000000000 x1/ra    ffffffff84fa9be2 x2/sp    ff200000000029e0 x3/gp    ffffffff890652c0
 x4/tp    ffffffff87841b40 x5/t0    ff20000000002870 x6/t1    00000000000f0000 x7/t2    ffffffff87223478
 x8/s0    ff20000000002aa0 x9/s1    0000000000000064 x10/a0   ff6000008d28dd50 x11/a1   0000000000000000
 x12/a2   0000000000000000 x13/a3   ffffffff84fa9d50 x14/a4   0000000000000000 x15/a5   ffffffff87841b40
 x16/a6   0000000000000100 x17/a7   0000000000000000 x18/s2   ff6000009012cc78 x19/s3   0000000000000004
 x20/s4   dfffffff00000000 x21/s5   ff20000000002b40 x22/s6   0000000000000004 x23/s7   ff6000009012cc64
 x24/s8   ff6000008d28dc80 x25/s9   ff20000000002b50 x26/s10  0000000000000001 x27/s11  ff6000009012cc70
 x28/t3   0000000000f00000 x29/t4   ffebffff114a580b x30/t5   ffebffff114a580c x31/t6   fffffffff3000000
 f0/ft0   0000000000000000 f1/ft1   0000000000000000 f2/ft2   0000000000000000 f3/ft3   0000000000000000
 f4/ft4   0000000000000000 f5/ft5   0000000000000000 f6/ft6   0000000000000000 f7/ft7   0000000000000000
 f8/fs0   0000000000000000 f9/fs1   0000000000000000 f10/fa0  0000000000000000 f11/fa1  0000000000000000
 f12/fa2  0000000000000000 f13/fa3  0000000000000000 f14/fa4  0000000000000000 f15/fa5  0000000000000000
 f16/fa6  0000000000000000 f17/fa7  0000000000000000 f18/fs2  0000000000000000 f19/fs3  0000000000000000
 f20/fs4  0000000000000000 f21/fs5  0000000000000000 f22/fs6  0000000000000000 f23/fs7  0000000000000000
 f24/fs8  0000000000000000 f25/fs9  0000000000000000 f26/fs10 0000000000000000 f27/fs11 0000000000000000
 f28/ft8  0000000000000000 f29/ft9  0000000000000000 f30/ft10 0000000000000000 f31/ft11 0000000000000000
