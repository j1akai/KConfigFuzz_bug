=============================
[ BUG: Invalid wait context ]
6.6.0 #1 Not tainted
-----------------------------
modprobe/5488 is trying to lock:
ff600000ffdefb58 (&zone->lock){..-.}-{3:3}, at: rmqueue_buddy home/rv/linux-repo/linux-66-kconfigfuzz/mm/page_alloc.c:2643 [inline]
ff600000ffdefb58 (&zone->lock){..-.}-{3:3}, at: rmqueue home/rv/linux-repo/linux-66-kconfigfuzz/mm/page_alloc.c:2783 [inline]
ff600000ffdefb58 (&zone->lock){..-.}-{3:3}, at: get_page_from_freelist+0x44e/0x3116 home/rv/linux-repo/linux-66-kconfigfuzz/mm/page_alloc.c:3167
other info that might help us debug this:
context-{2:2}
2 locks held by modprobe/5488:
 #0: ff600000fdd041d8 (&pcp->lock){+.+.}-{3:3}, at: spin_trylock home/rv/linux-repo/linux-66-kconfigfuzz/include/linux/spinlock.h:361 [inline]
 #0: ff600000fdd041d8 (&pcp->lock){+.+.}-{3:3}, at: rmqueue_pcplist home/rv/linux-repo/linux-66-kconfigfuzz/mm/page_alloc.c:2727 [inline]
 #0: ff600000fdd041d8 (&pcp->lock){+.+.}-{3:3}, at: rmqueue home/rv/linux-repo/linux-66-kconfigfuzz/mm/page_alloc.c:2777 [inline]
 #0: ff600000fdd041d8 (&pcp->lock){+.+.}-{3:3}, at: get_page_from_freelist+0xa96/0x3116 home/rv/linux-repo/linux-66-kconfigfuzz/mm/page_alloc.c:3167
 #1: ff600000fdcfee18 (&rq->__lock){-.-.}-{2:2}, at: raw_spin_rq_lock_nested home/rv/linux-repo/linux-66-kconfigfuzz/kernel/sched/core.c:558 [inline]
 #1: ff600000fdcfee18 (&rq->__lock){-.-.}-{2:2}, at: raw_spin_rq_lock home/rv/linux-repo/linux-66-kconfigfuzz/kernel/sched/sched.h:1372 [inline]
 #1: ff600000fdcfee18 (&rq->__lock){-.-.}-{2:2}, at: rq_lock home/rv/linux-repo/linux-66-kconfigfuzz/kernel/sched/sched.h:1681 [inline]
 #1: ff600000fdcfee18 (&rq->__lock){-.-.}-{2:2}, at: scheduler_tick+0x10a/0x89c home/rv/linux-repo/linux-66-kconfigfuzz/kernel/sched/core.c:5652
stack backtrace:
CPU: 0 PID: 5488 Comm: modprobe Not tainted 6.6.0 #1
Hardware name: riscv-virtio,qemu (DT)
Call Trace:
[<ffffffff8000dc50>] dump_backtrace+0x32/0x3c home/rv/linux-repo/linux-66-kconfigfuzz/arch/riscv/kernel/stacktrace.c:121
[<ffffffff85aeb8b6>] show_stack+0x34/0x40 home/rv/linux-repo/linux-66-kconfigfuzz/arch/riscv/kernel/stacktrace.c:127
[<ffffffff85b4131c>] __dump_stack home/rv/linux-repo/linux-66-kconfigfuzz/lib/dump_stack.c:88 [inline]
[<ffffffff85b4131c>] dump_stack_lvl+0xe2/0x14c home/rv/linux-repo/linux-66-kconfigfuzz/lib/dump_stack.c:106
[<ffffffff85b413a2>] dump_stack+0x1c/0x24 home/rv/linux-repo/linux-66-kconfigfuzz/lib/dump_stack.c:113
[<ffffffff8023e890>] print_lock_invalid_wait_context home/rv/linux-repo/linux-66-kconfigfuzz/kernel/locking/lockdep.c:4750 [inline]
[<ffffffff8023e890>] check_wait_context home/rv/linux-repo/linux-66-kconfigfuzz/kernel/locking/lockdep.c:4820 [inline]
[<ffffffff8023e890>] __lock_acquire+0x6de2/0x6f34 home/rv/linux-repo/linux-66-kconfigfuzz/kernel/locking/lockdep.c:5086
[<ffffffff8023ed30>] lock_acquire home/rv/linux-repo/linux-66-kconfigfuzz/kernel/locking/lockdep.c:5753 [inline]
[<ffffffff8023ed30>] lock_acquire+0x34e/0xd20 home/rv/linux-repo/linux-66-kconfigfuzz/kernel/locking/lockdep.c:5718
[<ffffffff85b651a6>] __raw_spin_lock_irqsave home/rv/linux-repo/linux-66-kconfigfuzz/include/linux/spinlock_api_smp.h:110 [inline]
[<ffffffff85b651a6>] _raw_spin_lock_irqsave+0x3e/0x62 home/rv/linux-repo/linux-66-kconfigfuzz/kernel/locking/spinlock.c:162
[<ffffffff8086d8bc>] rmqueue_buddy home/rv/linux-repo/linux-66-kconfigfuzz/mm/page_alloc.c:2643 [inline]
[<ffffffff8086d8bc>] rmqueue home/rv/linux-repo/linux-66-kconfigfuzz/mm/page_alloc.c:2783 [inline]
[<ffffffff8086d8bc>] get_page_from_freelist+0x44e/0x3116 home/rv/linux-repo/linux-66-kconfigfuzz/mm/page_alloc.c:3167
[<ffffffff808719ea>] __alloc_pages+0x1d6/0x243a home/rv/linux-repo/linux-66-kconfigfuzz/mm/page_alloc.c:4426
[<ffffffff808e2270>] alloc_pages+0x2ae/0x45c home/rv/linux-repo/linux-66-kconfigfuzz/mm/mempolicy.c:2299
[<ffffffff816da494>] __stack_depot_save+0x434/0x602 home/rv/linux-repo/linux-66-kconfigfuzz/lib/stackdepot.c:410
[<ffffffff809145b2>] kasan_save_stack+0x50/0x62 home/rv/linux-repo/linux-66-kconfigfuzz/mm/kasan/common.c:46
[<ffffffff80916ad0>] __kasan_record_aux_stack+0xe4/0x146 home/rv/linux-repo/linux-66-kconfigfuzz/mm/kasan/generic.c:492
[<ffffffff80916ee4>] kasan_record_aux_stack+0xe/0x16 home/rv/linux-repo/linux-66-kconfigfuzz/mm/kasan/generic.c:497
[<ffffffff80130ba8>] task_work_add+0x9c/0x276 home/rv/linux-repo/linux-66-kconfigfuzz/kernel/task_work.c:48
[<ffffffff8018607e>] task_tick_mm_cid+0xd0/0x186 home/rv/linux-repo/linux-66-kconfigfuzz/kernel/sched/core.c:12023
[<ffffffff801863ca>] scheduler_tick+0x296/0x89c home/rv/linux-repo/linux-66-kconfigfuzz/kernel/sched/core.c:5662
[<ffffffff80318c14>] update_process_times+0x1be/0x25e home/rv/linux-repo/linux-66-kconfigfuzz/kernel/time/timer.c:2076
[<ffffffff8034eec8>] tick_sched_handle+0x78/0x152 home/rv/linux-repo/linux-66-kconfigfuzz/kernel/time/tick-sched.c:254
[<ffffffff8034fa5c>] tick_sched_timer+0xc0/0x1c6 home/rv/linux-repo/linux-66-kconfigfuzz/kernel/time/tick-sched.c:1492
[<ffffffff8031bab8>] __run_hrtimer home/rv/linux-repo/linux-66-kconfigfuzz/kernel/time/hrtimer.c:1688 [inline]
[<ffffffff8031bab8>] __hrtimer_run_queues+0x1f4/0xbbe home/rv/linux-repo/linux-66-kconfigfuzz/kernel/time/hrtimer.c:1752
[<ffffffff8031eeae>] hrtimer_interrupt+0x2c4/0x79c home/rv/linux-repo/linux-66-kconfigfuzz/kernel/time/hrtimer.c:1814
[<ffffffff84192570>] riscv_timer_interrupt+0x7a/0xcc home/rv/linux-repo/linux-66-kconfigfuzz/drivers/clocksource/timer-riscv.c:123
[<ffffffff8027c4da>] handle_percpu_devid_irq+0x284/0x59e home/rv/linux-repo/linux-66-kconfigfuzz/kernel/irq/chip.c:942
[<ffffffff80265bd4>] generic_handle_irq_desc home/rv/linux-repo/linux-66-kconfigfuzz/include/linux/irqdesc.h:161 [inline]
[<ffffffff80265bd4>] handle_irq_desc home/rv/linux-repo/linux-66-kconfigfuzz/kernel/irq/irqdesc.c:672 [inline]
[<ffffffff80265bd4>] generic_handle_domain_irq+0x76/0xaa home/rv/linux-repo/linux-66-kconfigfuzz/kernel/irq/irqdesc.c:728
[<ffffffff816e7b9e>] riscv_intc_irq+0x6e/0xa2 home/rv/linux-repo/linux-66-kconfigfuzz/drivers/irqchip/irq-riscv-intc.c:30
[<ffffffff85b424e4>] handle_riscv_irq+0x2e/0x4c home/rv/linux-repo/linux-66-kconfigfuzz/arch/riscv/kernel/traps.c:355
[<ffffffff85b42ba2>] do_irq+0x92/0xb4 home/rv/linux-repo/linux-66-kconfigfuzz/arch/riscv/kernel/traps.c:391
[<ffffffff80006ef8>] ret_from_exception+0x0/0x64 home/rv/linux-repo/linux-66-kconfigfuzz/arch/riscv/kernel/entry.S:102
[<ffffffff808693ac>] list_del home/rv/linux-repo/linux-66-kconfigfuzz/include/linux/list.h:231 [inline]
[<ffffffff808693ac>] __rmqueue_pcplist+0x1aa/0x1084 home/rv/linux-repo/linux-66-kconfigfuzz/mm/page_alloc.c:2708
[<ffffffff8086df7e>] rmqueue_pcplist home/rv/linux-repo/linux-66-kconfigfuzz/mm/page_alloc.c:2740 [inline]
[<ffffffff8086df7e>] rmqueue home/rv/linux-repo/linux-66-kconfigfuzz/mm/page_alloc.c:2777 [inline]
[<ffffffff8086df7e>] get_page_from_freelist+0xb10/0x3116 home/rv/linux-repo/linux-66-kconfigfuzz/mm/page_alloc.c:3167
[<ffffffff808719ea>] __alloc_pages+0x1d6/0x243a home/rv/linux-repo/linux-66-kconfigfuzz/mm/page_alloc.c:4426
[<ffffffff8490a978>] __alloc_pages_node home/rv/linux-repo/linux-66-kconfigfuzz/include/linux/gfp.h:237 [inline]
[<ffffffff8490a978>] alloc_pages_node home/rv/linux-repo/linux-66-kconfigfuzz/include/linux/gfp.h:260 [inline]
[<ffffffff8490a978>] page_frag_alloc_1k home/rv/linux-repo/linux-66-kconfigfuzz/net/core/skbuff.c:235 [inline]
[<ffffffff8490a978>] __napi_alloc_skb+0x5ba/0x916 home/rv/linux-repo/linux-66-kconfigfuzz/net/core/skbuff.c:816
[<ffffffff82daf4ae>] napi_alloc_skb home/rv/linux-repo/linux-66-kconfigfuzz/include/linux/skbuff.h:3282 [inline]
[<ffffffff82daf4ae>] page_to_skb.isra.0+0x19c/0x950 home/rv/linux-repo/linux-66-kconfigfuzz/drivers/net/virtio_net.c:540
[<ffffffff82dbe7d8>] receive_mergeable home/rv/linux-repo/linux-66-kconfigfuzz/drivers/net/virtio_net.c:1651 [inline]
[<ffffffff82dbe7d8>] receive_buf+0x15f8/0x77d0 home/rv/linux-repo/linux-66-kconfigfuzz/drivers/net/virtio_net.c:1772
[<ffffffff82dc5202>] virtnet_receive home/rv/linux-repo/linux-66-kconfigfuzz/drivers/net/virtio_net.c:2076 [inline]
[<ffffffff82dc5202>] virtnet_poll+0x852/0x131e home/rv/linux-repo/linux-66-kconfigfuzz/drivers/net/virtio_net.c:2148
[<ffffffff849935e4>] __napi_poll.constprop.0+0xa4/0x79c home/rv/linux-repo/linux-66-kconfigfuzz/net/core/dev.c:6556
[<ffffffff84994506>] napi_poll home/rv/linux-repo/linux-66-kconfigfuzz/net/core/dev.c:6623 [inline]
[<ffffffff84994506>] net_rx_action+0x82a/0xc92 home/rv/linux-repo/linux-66-kconfigfuzz/net/core/dev.c:6756
[<ffffffff85b66a5c>] __do_softirq+0x410/0x102e home/rv/linux-repo/linux-66-kconfigfuzz/kernel/softirq.c:553
[<ffffffff800c8790>] invoke_softirq home/rv/linux-repo/linux-66-kconfigfuzz/kernel/softirq.c:427 [inline]
[<ffffffff800c8790>] __irq_exit_rcu+0x16a/0x436 home/rv/linux-repo/linux-66-kconfigfuzz/kernel/softirq.c:632
[<ffffffff800c8dee>] irq_exit_rcu+0xc/0x114 home/rv/linux-repo/linux-66-kconfigfuzz/kernel/softirq.c:644
[<ffffffff85b424f6>] handle_riscv_irq+0x40/0x4c home/rv/linux-repo/linux-66-kconfigfuzz/arch/riscv/kernel/traps.c:357
[<ffffffff85b42b7a>] do_irq+0x6a/0xb4 home/rv/linux-repo/linux-66-kconfigfuzz/arch/riscv/kernel/traps.c:367
