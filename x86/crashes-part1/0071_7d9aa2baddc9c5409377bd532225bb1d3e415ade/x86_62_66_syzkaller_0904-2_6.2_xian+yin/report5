BUG: scheduling while atomic: syz.6.911/17425/0x00000002
Modules linked in:
CPU: 0 PID: 17425 Comm: syz.6.911 Not tainted 6.2.0 #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.15.0-1 04/01/2014
Call Trace:
 <TASK>
 __dump_stack home/jiakai/62_66_amd_0904/linux62/linux-all/lib/dump_stack.c:88 [inline]
 dump_stack_lvl+0x72/0x95 home/jiakai/62_66_amd_0904/linux62/linux-all/lib/dump_stack.c:106
 __schedule_bug.cold+0x3e/0x4a home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/sched/core.c:5841
 schedule_debug home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/sched/core.c:5868 [inline]
 __schedule+0xf4b/0x1370 home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/sched/core.c:6503
 schedule+0x59/0xd0 home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/sched/core.c:6685
 schedule_timeout+0x191/0x1d0 home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/time/timer.c:2143
 ___down_common home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/locking/semaphore.c:225 [inline]
 __down_common+0x119/0x210 home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/locking/semaphore.c:246
 down+0x42/0x60 home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/locking/semaphore.c:63
 console_lock+0x1b/0x50 home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/printk/printk.c:2658
 do_con_write+0x8a/0xfc0 home/jiakai/62_66_amd_0904/linux62/linux-all/drivers/tty/vt/vt.c:2908
 con_write+0x25/0x40 home/jiakai/62_66_amd_0904/linux62/linux-all/drivers/tty/vt/vt.c:3295
 gsmld_write+0xb0/0xd0 home/jiakai/62_66_amd_0904/linux62/linux-all/drivers/tty/n_gsm.c:3413
 do_tty_write home/jiakai/62_66_amd_0904/linux62/linux-all/drivers/tty/tty_io.c:1018 [inline]
 file_tty_write.constprop.0+0x227/0x450 home/jiakai/62_66_amd_0904/linux62/linux-all/drivers/tty/tty_io.c:1089
 call_write_iter home/jiakai/62_66_amd_0904/linux62/linux-all/include/linux/fs.h:2189 [inline]
 new_sync_write home/jiakai/62_66_amd_0904/linux62/linux-all/fs/read_write.c:491 [inline]
 vfs_write+0x412/0x530 home/jiakai/62_66_amd_0904/linux62/linux-all/fs/read_write.c:584
 ksys_write+0xa1/0x170 home/jiakai/62_66_amd_0904/linux62/linux-all/fs/read_write.c:637
 do_syscall_x64 home/jiakai/62_66_amd_0904/linux62/linux-all/arch/x86/entry/common.c:50 [inline]
 do_syscall_64+0x3d/0xc0 home/jiakai/62_66_amd_0904/linux62/linux-all/arch/x86/entry/common.c:80
 entry_SYSCALL_64_after_hwframe+0x73/0xdd
RIP: 0033:0x7f6330fae16d
Code: 02 b8 ff ff ff ff c3 66 0f 1f 44 00 00 f3 0f 1e fa 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007f6331e44f98 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f63311f5fa0 RCX: 00007f6330fae16d
RDX: 0000000000000010 RSI: 0000200000000040 RDI: 0000000000000007
RBP: 00007f63310480f0 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 0000000000000000
R13: 00007f63311f6038 R14: 00007f63311f5fa0 R15: 00007f6331e25000
 </TASK>
BUG: scheduling while atomic: syz.6.911/17425/0x00000000
Modules linked in:
CPU: 0 PID: 17425 Comm: syz.6.911 Tainted: G        W          6.2.0 #1
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.15.0-1 04/01/2014
Call Trace:
 <TASK>
 __dump_stack home/jiakai/62_66_amd_0904/linux62/linux-all/lib/dump_stack.c:88 [inline]
 dump_stack_lvl+0x72/0x95 home/jiakai/62_66_amd_0904/linux62/linux-all/lib/dump_stack.c:106
 __schedule_bug.cold+0x3e/0x4a home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/sched/core.c:5841
 schedule_debug home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/sched/core.c:5868 [inline]
 __schedule+0xf4b/0x1370 home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/sched/core.c:6503
 schedule+0x59/0xd0 home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/sched/core.c:6685
 schedule_timeout+0x191/0x1d0 home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/time/timer.c:2143
 do_wait_for_common home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/sched/completion.c:85 [inline]
 __wait_for_common+0x90/0x1e0 home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/sched/completion.c:106
 wait_for_common home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/sched/completion.c:117 [inline]
 wait_for_completion_state+0x1c/0x40 home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/sched/completion.c:254
 coredump_wait home/jiakai/62_66_amd_0904/linux62/linux-all/fs/coredump.c:412 [inline]
 do_coredump+0x38a/0x1ed0 home/jiakai/62_66_amd_0904/linux62/linux-all/fs/coredump.c:569
 get_signal+0xea6/0xfe0 home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/signal.c:2845
 arch_do_signal_or_restart+0x29/0x260 home/jiakai/62_66_amd_0904/linux62/linux-all/arch/x86/kernel/signal.c:306
 exit_to_user_mode_loop home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/entry/common.c:168 [inline]
 exit_to_user_mode_prepare+0xd9/0x140 home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/entry/common.c:203
 irqentry_exit_to_user_mode+0xa/0x20 home/jiakai/62_66_amd_0904/linux62/linux-all/kernel/entry/common.c:309
 exc_page_fault+0x5fd/0xe50 home/jiakai/62_66_amd_0904/linux62/linux-all/arch/x86/mm/fault.c:1578
 asm_exc_page_fault+0x26/0x30 home/jiakai/62_66_amd_0904/linux62/linux-all/arch/x86/include/asm/idtentry.h:570
RIP: 0033:0x7f6330e5f3ac
Code: f0 83 04 25 90 ff ff ff 01 64 48 8b 04 25 00 00 00 00 48 8d b8 c8 fe ff ff e8 60 4d 0d 00 f3 0f 1e fa 85 c0 0f 84 cc 01 00 00 <64> f0 83 2c 25 90 ff ff ff 01 e8 85 f1 0b 00 48 8b 4c 24 08 8b 00
RSP: 002b:00007f6331e44fc0 EFLAGS: 00010206
RAX: 0000000000000010 RBX: 00007f63311f5fa0 RCX: 00007f6330e57a65
RDX: 0000000000000000 RSI: 0000200000000040 RDI: 0000000000000007
RBP: 00007f63310480f0 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 0000000000000000
R13: 00007f63311f6038 R14: 00007f63311f5fa0 R15: 00007f6331e25000
 </TASK>
